[{"filePath":"E:\\PROGRAMMING\\APP POSYANDU\\posyandu-merden\\components\\Sidebar.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\PROGRAMMING\\APP POSYANDU\\posyandu-merden\\components\\Sidebar.tsx:39:9\n  37 |     // Close sidebar on route change (mobile)\n  38 |     useEffect(() => {\n> 39 |         setIsOpen(false);\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  40 |     }, [pathname]);\n  41 |\n  42 |     const handleLogout = async () => {","line":39,"column":9,"nodeType":null,"endLine":39,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    LayoutDashboard,\r\n    FileText,\r\n    CalendarDays,\r\n    Users,\r\n    Syringe,\r\n    Bell,\r\n    Settings,\r\n    LogOut,\r\n    Shield,\r\n    Menu,\r\n    X,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { createClient } from '@/lib/supabase';\r\n\r\nconst adminMenuItems = [\r\n    { label: 'Dashboard', href: '/admin/dashboard', icon: LayoutDashboard },\r\n    { label: 'Laporan', href: '/admin/laporan', icon: FileText },\r\n    { label: 'Jadwal', href: '/admin/jadwal', icon: CalendarDays },\r\n    { label: 'Pengguna', href: '/admin/pengguna', icon: Users },\r\n    { label: 'Imunisasi', href: '/admin/imunisasi', icon: Syringe },\r\n    { label: 'Notifikasi', href: '/admin/notifikasi', icon: Bell },\r\n];\r\n\r\nexport function Sidebar() {\r\n    const pathname = usePathname();\r\n    const router = useRouter();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const supabase = createClient();\r\n\r\n    // Close sidebar on route change (mobile)\r\n    useEffect(() => {\r\n        setIsOpen(false);\r\n    }, [pathname]);\r\n\r\n    const handleLogout = async () => {\r\n        await supabase.auth.signOut();\r\n        router.push('/login');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Mobile Header */}\r\n            <div className=\"fixed top-0 left-0 right-0 z-20 h-16 bg-white/80 backdrop-blur-md border-b border-slate-100 flex items-center justify-between px-4 md:hidden animate-fade-in\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"p-1.5 bg-gradient-to-br from-teal-500 to-emerald-500 rounded-lg shadow-sm\">\r\n                        <Shield className=\"h-4 w-4 text-white\" />\r\n                    </div>\r\n                    <span className=\"font-bold text-slate-800 text-sm\">Posyandu ILP</span>\r\n                </div>\r\n                <button\r\n                    onClick={() => setIsOpen(true)}\r\n                    className=\"p-2 -mr-2 text-slate-500 hover:bg-slate-50 rounded-lg\"\r\n                >\r\n                    <Menu className=\"h-6 w-6\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Overlay */}\r\n            {isOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 z-30 bg-black/40 backdrop-blur-sm md:hidden animate-fade-in\"\r\n                    onClick={() => setIsOpen(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Sidebar */}\r\n            <aside\r\n                className={cn(\r\n                    'fixed inset-y-0 left-0 z-40 w-64 bg-white border-r border-slate-100 flex flex-col transition-transform duration-300 ease-in-out md:translate-x-0 shadow-2xl md:shadow-none',\r\n                    isOpen ? 'translate-x-0' : '-translate-x-full'\r\n                )}\r\n            >\r\n                {/* Logo (Desktop) / Header (Mobile) */}\r\n                <div className=\"p-6 border-b border-slate-100 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"p-2 bg-gradient-to-br from-teal-500 to-emerald-500 rounded-xl shadow-lg shadow-teal-500/20\">\r\n                            <Shield className=\"h-5 w-5 text-white\" />\r\n                        </div>\r\n                        <div>\r\n                            <h1 className=\"font-bold text-slate-800 text-sm\">Posyandu ILP</h1>\r\n                            <p className=\"text-[10px] text-slate-400 font-medium\">Desa Merden</p>\r\n                        </div>\r\n                    </div>\r\n                    {/* Close Button (Mobile) */}\r\n                    <button\r\n                        onClick={() => setIsOpen(false)}\r\n                        className=\"md:hidden p-1 text-slate-400 hover:text-slate-600\"\r\n                    >\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\r\n                    <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-wider px-3 mb-3\">\r\n                        Menu Utama\r\n                    </p>\r\n                    {adminMenuItems.map((item) => {\r\n                        const isActive = pathname.startsWith(item.href);\r\n                        return (\r\n                            <Link\r\n                                key={item.href}\r\n                                href={item.href}\r\n                                className={cn(\r\n                                    'flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200',\r\n                                    isActive\r\n                                        ? 'bg-gradient-to-r from-teal-50 to-emerald-50 text-teal-700 shadow-sm'\r\n                                        : 'text-slate-500 hover:bg-slate-50 hover:text-slate-700'\r\n                                )}\r\n                            >\r\n                                <item.icon className={cn('h-4.5 w-4.5', isActive ? 'text-teal-600' : '')} />\r\n                                {item.label}\r\n                                {isActive && (\r\n                                    <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-teal-500\" />\r\n                                )}\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </nav>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-4 border-t border-slate-100 space-y-1\">\r\n                    <Link\r\n                        href=\"/admin/pengaturan\"\r\n                        className=\"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-500 hover:bg-slate-50 hover:text-slate-700 transition-colors\"\r\n                    >\r\n                        <Settings className=\"h-4.5 w-4.5\" />\r\n                        Pengaturan\r\n                    </Link>\r\n                    <button\r\n                        onClick={handleLogout}\r\n                        className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-red-500 hover:bg-red-50 transition-colors\"\r\n                    >\r\n                        <LogOut className=\"h-4.5 w-4.5\" />\r\n                        Keluar\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]}]
